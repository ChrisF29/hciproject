<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Bomb - Defuse the Scramble!</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>
    <div class="game-container">
        <!-- User Bar -->
        <div id="user-bar" class="user-bar">
            <div id="logged-in-view" class="user-section">
                <span id="user-welcome" class="user-welcome">ğŸ‘¤ Welcome, <span id="username-display"><?php echo htmlspecialchars($currentUser['username']); ?></span>!</span>
                <a href="leaderboard.php" class="user-btn leaderboard-btn">ğŸ† Leaderboard</a>
                <a href="logout.php" class="user-btn logout-btn">ğŸšª Logout</a>
            </div>
        </div>

        <!-- Start Screen -->
        <div id="start-screen" class="screen active">
            <div class="title-container">
                <h1 class="game-title">ğŸ’£ Decrypt ğŸ’£</h1>
                <p class="subtitle">Defuse the scramble before it's too late!</p>
            </div>
            
            <div class="difficulty-selector">
                <h3>Select Difficulty</h3>
                <div class="difficulty-buttons">
                    <button class="diff-btn" data-difficulty="easy" data-time="30">
                        <span class="diff-icon">ğŸŸ¢</span>
                        <span class="diff-name">Easy</span>
                        <span class="diff-time">30 seconds</span>
                    </button>
                    <button class="diff-btn" data-difficulty="medium" data-time="20">
                        <span class="diff-icon">ğŸŸ¡</span>
                        <span class="diff-name">Medium</span>
                        <span class="diff-time">20 seconds</span>
                    </button>
                    <button class="diff-btn" data-difficulty="hard" data-time="12">
                        <span class="diff-icon">ğŸ”´</span>
                        <span class="diff-name">Hard</span>
                        <span class="diff-time">12 seconds</span>
                    </button>
                    <button class="diff-btn" data-difficulty="extreme" data-time="7">
                        <span class="diff-icon">ğŸ’€</span>
                        <span class="diff-name">Extreme</span>
                        <span class="diff-time">7 seconds</span>
                    </button>
                </div>
            </div>

            <div class="category-selector">
                <h3>Select Category</h3>
                <div class="category-buttons">
                    <button class="cat-btn selected" data-category="all">
                        <span class="cat-icon">ğŸ²</span>
                        <span class="cat-name">All Categories</span>
                    </button>
                    <button class="cat-btn" data-category="Animals">
                        <span class="cat-icon">ğŸ¾</span>
                        <span class="cat-name">Animals</span>
                    </button>
                    <button class="cat-btn" data-category="Food">
                        <span class="cat-icon">ğŸ•</span>
                        <span class="cat-name">Food</span>
                    </button>
                    <button class="cat-btn" data-category="Technology">
                        <span class="cat-icon">ğŸ’»</span>
                        <span class="cat-name">Technology</span>
                    </button>
                    <button class="cat-btn" data-category="Sports">
                        <span class="cat-icon">âš½</span>
                        <span class="cat-name">Sports</span>
                    </button>
                    <button class="cat-btn" data-category="Nature">
                        <span class="cat-icon">ğŸŒ¿</span>
                        <span class="cat-name">Nature</span>
                    </button>
                    <button class="cat-btn" data-category="Science">
                        <span class="cat-icon">ğŸ”¬</span>
                        <span class="cat-name">Science</span>
                    </button>
                    <button class="cat-btn" data-category="Music">
                        <span class="cat-icon">ğŸµ</span>
                        <span class="cat-name">Music</span>
                    </button>
                    <button class="cat-btn" data-category="Countries">
                        <span class="cat-icon">ğŸŒ</span>
                        <span class="cat-name">Countries</span>
                    </button>
                    <button class="cat-btn" data-category="Fantasy">
                        <span class="cat-icon">ğŸ‰</span>
                        <span class="cat-name">Fantasy</span>
                    </button>
                    <button class="cat-btn" data-category="Professions">
                        <span class="cat-icon">ğŸ‘¨â€âš•ï¸</span>
                        <span class="cat-name">Professions</span>
                    </button>
                    <button class="cat-btn" data-category="Space">
                        <span class="cat-icon">ğŸš€</span>
                        <span class="cat-name">Space</span>
                    </button>
                    <button class="cat-btn" data-category="Clothing">
                        <span class="cat-icon">ğŸ‘•</span>
                        <span class="cat-name">Clothing</span>
                    </button>
                    <button class="cat-btn" data-category="Buildings">
                        <span class="cat-icon">ğŸ°</span>
                        <span class="cat-name">Buildings</span>
                    </button>
                    <button class="cat-btn" data-category="Emotions">
                        <span class="cat-icon">ğŸ˜Š</span>
                        <span class="cat-name">Emotions</span>
                    </button>
                    <button class="cat-btn" data-category="Games">
                        <span class="cat-icon">ğŸ®</span>
                        <span class="cat-name">Games</span>
                    </button>
                    <button class="cat-btn" data-category="Transportation">
                        <span class="cat-icon">ğŸš—</span>
                        <span class="cat-name">Transportation</span>
                    </button>
                    <button class="cat-btn" data-category="Weather">
                        <span class="cat-icon">ğŸŒ¦ï¸</span>
                        <span class="cat-name">Weather</span>
                    </button>
                    <button class="cat-btn" data-category="Household">
                        <span class="cat-icon">ğŸ </span>
                        <span class="cat-name">Household</span>
                    </button>
                    <button class="cat-btn" data-category="Body">
                        <span class="cat-icon">ğŸ«€</span>
                        <span class="cat-name">Body</span>
                    </button>
                    <button class="cat-btn" data-category="Colors">
                        <span class="cat-icon">ğŸ¨</span>
                        <span class="cat-name">Colors</span>
                    </button>
                    <button class="cat-btn" data-category="Shapes">
                        <span class="cat-icon">ğŸ”·</span>
                        <span class="cat-name">Shapes</span>
                    </button>
                </div>
            </div>
            
            <button id="start-btn" class="main-btn pulse">START GAME</button>
            
            <div class="instructions">
                <h4>How to Play</h4>
                <ul>
                    <li>ğŸ”¤ Unscramble the word before the bomb explodes</li>
                    <li>âŒ¨ï¸ Type your answer and press Enter or click Submit</li>
                    <li>ğŸ’¡ Use hints if you're stuck (costs points)</li>
                    <li>ğŸ† Score points for each word defused</li>
                    <li>âš¡ Faster answers = More points!</li>
                </ul>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <div class="game-header">
                <div class="score-display">
                    <span class="label">SCORE</span>
                    <span id="score" class="value">0</span>
                </div>
                <div class="streak-display">
                    <span class="label">STREAK</span>
                    <span id="streak" class="value">ğŸ”¥ 0</span>
                </div>
                <div class="words-display">
                    <span class="label">DEFUSED</span>
                    <span id="words-defused" class="value">0</span>
                </div>
            </div>

            <div class="bomb-container">
                <div id="bomb" class="bomb">
                    <div class="bomb-body">
                        <div class="bomb-highlight"></div>
                        <div class="bomb-timer-display">
                            <span id="timer-display">30</span>
                        </div>
                    </div>
                    <div class="bomb-fuse">
                        <div id="fuse-spark" class="fuse-spark"></div>
                    </div>
                    <div class="bomb-cap"></div>
                </div>
                <div id="explosion" class="explosion hidden">
                    <div class="explosion-inner"></div>
                </div>
            </div>

            <div class="word-area">
                <div class="category-hint">
                    <span id="category">Category: Loading...</span>
                </div>
                <div id="scrambled-word" class="scrambled-word">LOADING</div>
                <div class="word-length">
                    <span id="word-length">Word length: 0 letters</span>
                </div>
            </div>

            <div class="input-area">
                <input type="text" id="guess-input" placeholder="Type your guess..." autocomplete="off" autofocus>
                <button id="submit-btn" class="submit-btn">DEFUSE!</button>
            </div>

            <div class="game-controls">
                <button id="hint-btn" class="control-btn hint-btn">
                    ğŸ’¡ HINT <span id="hint-cost">(-50 pts)</span>
                </button>
                <button id="skip-btn" class="control-btn skip-btn">
                    â­ï¸ SKIP <span>(-100 pts)</span>
                </button>
            </div>

            <div id="hint-display" class="hint-display hidden"></div>
            <div id="feedback" class="feedback"></div>
        </div>

        <!-- Game Over Screen -->
        <div id="gameover-screen" class="screen">
            <div id="gameover-content">
                <h2 id="gameover-title">ğŸ’¥ BOOM! ğŸ’¥</h2>
                <p id="gameover-message">The bomb exploded!</p>
                
                <div class="final-stats">
                    <div class="stat">
                        <span class="stat-label">Final Score</span>
                        <span id="final-score" class="stat-value">0</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Words Defused</span>
                        <span id="final-words" class="stat-value">0</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Best Streak</span>
                        <span id="final-streak" class="stat-value">0</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">The Word Was</span>
                        <span id="correct-word" class="stat-value correct-word">---</span>
                    </div>
                </div>

                <div id="achievement-popup" class="achievement-popup hidden">
                    <h3>ğŸ‰ Achievement Unlocked!</h3>
                    <div id="achievement-content"></div>
                </div>

                <div class="highscore-section">
                    <h3>ğŸ† High Scores</h3>
                    <div id="highscores-list" class="highscores-list"></div>
                    <a href="leaderboard.php" class="view-all-btn">View Full Leaderboard â†’</a>
                </div>

                <div class="gameover-buttons">
                    <button id="play-again-btn" class="main-btn">PLAY AGAIN</button>
                    <button id="menu-btn" class="secondary-btn">MAIN MENU</button>
                </div>
            </div>
        </div>

        <!-- Theme Toggle -->
        <button id="theme-toggle" class="theme-toggle" title="Toggle Light/Dark Mode">
            <span class="theme-icon">ğŸŒ™</span>
        </button>

        <!-- Sound Toggle -->
        <button id="sound-toggle" class="sound-toggle">ğŸ”Š</button>
    </div>

    <script src="script.js"></script>
    <script>
        // Theme Toggle Functionality
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = themeToggle.querySelector('.theme-icon');
        
        // Check for saved theme preference or default to dark
        const savedTheme = localStorage.getItem('theme') || 'dark';
        document.documentElement.setAttribute('data-theme', savedTheme);
        updateThemeIcon(savedTheme);
        
        themeToggle.addEventListener('click', () => {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeIcon(newTheme);
        });
        
        function updateThemeIcon(theme) {
            themeIcon.textContent = theme === 'dark' ? 'ğŸŒ™' : 'â˜€ï¸';
        }
    </script>
</body>
</html>
